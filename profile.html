<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageName">Profile Viewer | Profile</title>

    <link href="css/bootstrap.min.css"" type="text/css" rel="stylesheet" />
    <link href="css/font-awesome.min.css"" type="text/css" rel="stylesheet" />
    <link href="css/site.css"" type="text/css" rel="stylesheet" />
    <script src="js/jquery-3.5.1.min.js""></script>
    <script src="js/jquery.validate.min.js""></script>
    <script src="js/modernizr-2.8.3.js""></script>
    <script src="js/bootstrap.min.js""></script>
    <script src="js/app/app.js""></script>

</head>
<body style="background-color: #e5e5e5;">
    <div class="loader">
        <img src="images/loader.gif"" alt="" />
    </div>
    <div class="wrapper">
        <div class="sidebar">
            <h2>AD</h2>
            <ul id="asideNav">
                <li><a href="dashboard.html" class="nav-anchor" onclick="UpdateSelect(event, 'dashboard')"><i class="fa fa-home" aria-hidden="true"></i><label class="nav-label">Dashboard</label></a></li>
                <li><a href="profile.html" class="nav-anchor active arrow" onclick="UpdateSelect(event, 'profile')"><i class="fa fa-user"></i><label class="nav-label">My Profile</label></a></li>
                <li><a href="works.html" class="nav-anchor" onclick="UpdateSelect(event, 'works')"><i class="fa fa-cog"></i><label class="nav-label">My Works</label></a></li>
                <li><a href="javascript:void(0)" class="nav-anchor" onclick="UpdateSelect(event, 'business')"><i class="fa fa-cogs"></i><label class="nav-label">Manage Business</label></a></li>
                <li><a href="javascript:void(0)" class="nav-anchor" onclick="UpdateSelect(event, 'users')"><i class="fa fa-user-plus"></i><label class="nav-label">Users</label></a></li>
                <li><a href="javascript:void(0)" class="nav-anchor" onclick="UpdateSelect(event, 'Customers')"><i class="fa fa-user-circle"></i><label class="nav-label">Customers</label></a></li>
                <li><a href="javascript:void(0)" class="nav-anchor" onclick="UpdateSelect(event, 'schedule')"><i class="fa fa-calendar"></i><label class="nav-label">Schedule</label></a></li>
                <li><a href="javascript:logout()"><i class="fa fa-power-off"></i><label class="nav-label">Logout</label></a></li>
            </ul>
        </div>
        <div class="main-content">
            <div class="top-bar d-flex pt-2 pb-2">
                <div class="col-md-2">
                    <a class="nav-bars" onclick="ToggleNavigation(event)"><i class="fa fa-bars" aria-hidden="true"></i></a>
                </div>
                <div class="col-md-3 offset-md-7">
                    <input type="text" placeholder="Search Here..." id="searchGlobal" class="form-control pull-right"/>
                </div>
            </div>            
            <div class="base-view">
                <h4 class="site_color">My Profile</h4>
                <h6 class="site_color">Md Shahjahan : Administrator</h6>
            
                    <div class="row mt-2 mb-2">
                        <div class="col-md-12">
                            <button class="btn btn-primary btn-sm pull-right" id="Edit" onclick="EnableForEdit(event)"><i class="fa fa-edit"></i>&nbsp;Edit</button>
                            <button type="submit" id="saveEdit" class="btn btn-success btn-sm d-none pull-right ml-2" onclick="SaveChanges(event)"><i class="fa fa-save"></i>&nbsp;Save</button>
                            <button type="button" id="cancelEdit" class="btn btn-danger btn-sm d-none pull-right" onclick="DisableForEdit(event)"><i class="fa fa-close"></i>&nbsp;Cancel</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <p class="card-header">Profile Picture</p>
                            <div class="profile-picture-box">
                                <img src="images/dp.jpg" alt="profile-pic" />
                            </div>
                        </div>
                        <div class="col-md-8">
                            <p class="card-header">Basic Information</p>
                            <div class="profile-content">
            
                                <div class="form-horizontal">
                                    <input type="hidden" id="Id" value="" />
                                    <div class="row mr-1 ml-1">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="prof-content-size">Email Address (Username) <a>Change Username</a></label>
                                                <div>
                                                    <input type="email" id="ParimaryEmailAddress" class="form-control prof-content-size" disabled />
                                                </div>
                                            </div>
            
                                            <div class="form-group">
                                                <label class="prof-content-size">First Name</label>
                                                <div>
                                                    <input type="text" id="FirstName" class="form-control prof-content-size" disabled />
                                                </div>
                                            </div>
            
                                            <div class="form-group">
                                                <label class="prof-content-size">Preffered Phone Number</label>
                                                <div>
                                                    <input type="text" id="PrimaryPhone" class="form-control prof-content-size" disabled />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="prof-content-size">Alternate Email address (Optional)</label>
                                                <div>
                                                    <input type="text" id="AlternateEmailAddress" class="form-control prof-content-size" disabled />
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="prof-content-size">Last Name</label>
                                                <div>
                                                    <input type="text" id="LastName" class="form-control prof-content-size" disabled />
                                                </div>
                                            </div>
            
                                            <div class="form-group">
                                                <label class="prof-content-size">Alternate Phone Number (Optional)</label>
                                                <div>
                                                    <input type="text" id="AlternatePhone" class="form-control prof-content-size" disabled />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>                    
                            </div>
                        </div>
                    </div>
            </div>
            
            <script type="text/javascript">
                function EnableForEdit(e) {
                    e.preventDefault()
                    $('#ParimaryEmailAddress').prop('disabled', false);
                    $('#AlternateEmailAddress').prop('disabled', false);
                    $('#FirstName').prop('disabled', false);
                    $('#LastName').prop('disabled', false);
                    $('#PrimaryPhone').prop('disabled', false);
                    $('#AlternatePhone').prop('disabled', false);
            
                    $('#saveEdit').removeClass('d-none');
                    $("#cancelEdit").removeClass('d-none');
                    $("#Edit").hide();
                }
            
                function DisableForEdit(e) {
                    e.preventDefault()
                    $('#ParimaryEmailAddress').prop('disabled', true);
                    $('#AlternateEmailAddress').prop('disabled', true);
                    $('#FirstName').prop('disabled', true);
                    $('#LastName').prop('disabled', true);
                    $('#PrimaryPhone').prop('disabled', true);
                    $('#AlternatePhone').prop('disabled', true);
            
                    $('#saveEdit').addClass('d-none');
                    $("#cancelEdit").addClass('d-none');
                    $("#Edit").show();
                }
            
                function SaveChanges(e) {
                    e.preventDefault();
                    $('.loader').show();
                    var profileViewModel = {
                        Id: $('#Id').val(),
                        ParimaryEmailAddress: $('#ParimaryEmailAddress').val(),
                        AlternateEmailAddress: $('#AlternateEmailAddress').val(),
                        FirstName: $('#FirstName').val(),
                        LastName: $('#LastName').val(),
                        PrimaryPhone: $('#PrimaryPhone').val(),
                        AlternatePhone: $('#AlternatePhone').val()
                    };
                    $.ajax({
                        type: 'POST',
                        url: '/Home/UpdateProfile',
                        data: { model: profileViewModel },
                        success: function (resp) {
                            $('.loader').hide();
                            alert(resp);
                        },
                        error: function (resp) {
                            $('.loader').hide();
                            alert(resp);
                        }
                    });
                }
                var userProfile = JSON.parse(localStorage.getItem('userInfo'));
                $('#ParimaryEmailAddress').val(userProfile.primaryEmail);
                $('#AlternateEmailAddress').val(userProfile.altEmail);
                $('#FirstName').val(userProfile.firstName);
                $('#LastName').val(userProfile.lastName);
                $('#PrimaryPhone').val(userProfile.phoneNum);
                $('#AlternatePhone').val(userProfile.altNum);

            </script>
            <div class="footer">
                <p>&copy; - Copyright reserved to Shahjahan, 2020</p>
            </div>
        </div>
    </div>

</body>
</html>